<div class="dashboard-main-body">
  <app-breadcrumb [title]="title"></app-breadcrumb>

  <div class="card h-100 p-0 radius-12">
    <div class="card-body p-24">
      <div class="row justify-content-center">
        <div class="col-xxl-6 col-xl-8 col-lg-10">
          <div class="card border">
            <div class="card-body">
              <h3 class="text-primary mb-16" style="text-align: center">
                Add-User-Form
              </h3>

              <form [formGroup]="userForm" (ngSubmit)="submitForm()">
                <!-- First Name -->
                <mat-form-field appearance="outline" class="w-100 mb-20">
                  <mat-label>First Name </mat-label>
                  <input
                    matInput
                    placeholder="Enter First Name"
                    formControlName="firstName"
                  />
                  <mat-error
                    *ngIf="userForm.get('firstName')?.hasError('required')"
                  >
                    First name is required
                  </mat-error>
                </mat-form-field>

                <!-- Last Name -->
                <mat-form-field appearance="outline" class="w-100 mb-20">
                  <mat-label>Last Name </mat-label>
                  <input
                    matInput
                    placeholder="Enter Last Name"
                    formControlName="lastName"
                  />
                  <mat-error
                    *ngIf="userForm.get('lastName')?.hasError('required')"
                  >
                    Last name is required
                  </mat-error>
                </mat-form-field>

                <!-- Email -->
                <mat-form-field appearance="outline" class="w-100 mb-20">
                  <mat-label>Email </mat-label>
                  <input
                    matInput
                    placeholder="Enter Email"
                    type="email"
                    formControlName="email"
                  />
                  <mat-error
                    *ngIf="userForm.get('email')?.hasError('required')"
                  >
                    Email is required
                  </mat-error>
                  <mat-error *ngIf="userForm.get('email')?.hasError('email')">
                    Enter a valid email
                  </mat-error>
                </mat-form-field>

                <!-- Phone -->
                <mat-form-field appearance="outline" class="w-100 mb-20">
                  <mat-label>Phone</mat-label>
                  <input
                    matInput
                    placeholder="Enter Phone Number"
                    formControlName="phoneNumber"
                  />
                </mat-form-field>

                <!-- Username -->
                <mat-form-field appearance="outline" class="w-100 mb-20">
                  <mat-label>Username </mat-label>
                  <input
                    matInput
                    placeholder="Enter Username"
                    formControlName="userName"
                  />
                  <mat-error
                    *ngIf="userForm.get('userName')?.hasError('required')"
                  >
                    Username is required
                  </mat-error>
                </mat-form-field>

                <!-- Password -->
                <mat-form-field appearance="outline" class="w-100 mb-20">
                  <mat-label>Password </mat-label>
                  <input
                    matInput
                    type="password"
                    placeholder="Enter Password"
                    formControlName="password"
                  />
                  <mat-error
                    *ngIf="userForm.get('password')?.hasError('required')"
                  >
                    Password is required
                  </mat-error>
                </mat-form-field>

                <!-- Roles -->
                <mat-form-field appearance="outline" class="w-100 mb-20">
                  <mat-label>Roles </mat-label>
                  <mat-select formControlName="roleIds" multiple>
                    <mat-option *ngFor="let role of roles" [value]="role.id">
                      {{ role.name }}
                    </mat-option>
                  </mat-select>
                  <mat-error
                    *ngIf="userForm.get('roleIds')?.hasError('required')"
                  >
                    Please select at least one role
                  </mat-error>
                </mat-form-field>

                <!-- Buttons -->
                <div
                  class="d-flex align-items-center justify-content-center gap-3 mt-3"
                >
                  <button mat-flat-button color="warn" type="button" (click)="onCancel()">
                    Cancel
                  </button>
                  <button
                    mat-flat-button
                    color="primary"
                    type="submit"
                    [disabled]="loading"
                  >
                    {{ loading ? "Saving..." : "Save" }}
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
